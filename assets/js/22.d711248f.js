(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{400:function(e,t,a){"use strict";a.r(t);var n=a(11),s=Object(n.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"provider-migration-guide"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#provider-migration-guide"}},[e._v("#")]),e._v(" Provider Migration Guide")]),e._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[e._v("Deadline")]),e._v(" "),a("p",[e._v("All of these changes are shipping on "),a("strong",[e._v("November 16, 2020")]),e._v(".")]),e._v(" "),a("p",[e._v("If your web3 site relies on any of these features, it may break when these changes are made unless you migrate.")])]),e._v(" "),a("p",[e._v("As noted in the "),a("RouterLink",{attrs:{to:"/guide/ethereum-provider.html#upcoming-breaking-changes"}},[e._v("Ethereum Provider documentation")]),e._v(", on "),a("strong",[e._v("November 16, 2020")]),e._v(", we are shipping breaking changes to our provider API and removing our injected "),a("code",[e._v("window.web3")]),e._v(".\nThis guide describes how to migrate to the new provider API, and how to replace our "),a("code",[e._v("window.web3")]),e._v(" object.")],1),e._v(" "),a("p",[e._v("All replacement APIs are live, and you can migrate at any time.\nIf you will be affected by the breaking changes, we recommend that you migrate as soon as possible.")]),e._v(" "),a("p",[e._v("You can follow "),a("a",{attrs:{href:"https://github.com/MetaMask/metamask-extension/issues/8077",target:"_blank",rel:"noopener noreferrer"}},[e._v("this GitHub issue"),a("OutboundLink")],1),e._v(" to be notified of the dates of the breaking changes once we announce them.")]),e._v(" "),a("h2",{attrs:{id:"table-of-contents"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#table-of-contents"}},[e._v("#")]),e._v(" Table of Contents")]),e._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#table-of-contents"}},[e._v("Table of Contents")])]),a("li",[a("a",{attrs:{href:"#migrating-to-the-new-provider-api"}},[e._v("Migrating to the New Provider API")]),a("ul",[a("li",[a("a",{attrs:{href:"#handling-eth-chainid-return-values"}},[e._v("Handling eth_chainId Return Values")])]),a("li",[a("a",{attrs:{href:"#handling-the-removal-of-chainidchanged"}},[e._v("Handling the Removal of chainIdChanged")])]),a("li",[a("a",{attrs:{href:"#handling-the-removal-of-isenabled-and-isapproved"}},[e._v("Handling the Removal of isEnabled() and isApproved()")])]),a("li",[a("a",{attrs:{href:"#handling-the-removal-of-ethereum-publicconfigstore"}},[e._v("Handling the Removal of ethereum.publicConfigStore")])])])]),a("li",[a("a",{attrs:{href:"#replacing-window-web3"}},[e._v("Replacing window.web3")]),a("ul",[a("li",[a("a",{attrs:{href:"#using-window-ethereum-directly"}},[e._v("Using window.ethereum Directly")])]),a("li",[a("a",{attrs:{href:"#using-an-updated-convenience-library"}},[e._v("Using an Updated Convenience library")])]),a("li",[a("a",{attrs:{href:"#using-metamask-legacy-web3"}},[e._v("Using @metamask/legacy-web3")])])])])])]),a("p"),e._v(" "),a("h2",{attrs:{id:"migrating-to-the-new-provider-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#migrating-to-the-new-provider-api"}},[e._v("#")]),e._v(" Migrating to the New Provider API")]),e._v(" "),a("h3",{attrs:{id:"handling-eth-chainid-return-values"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#handling-eth-chainid-return-values"}},[e._v("#")]),e._v(" Handling "),a("code",[e._v("eth_chainId")]),e._v(" Return Values")]),e._v(" "),a("p",[e._v("Due to a long-standing bug, MetaMask's implementation of the "),a("code",[e._v("eth_chainId")]),e._v(" RPC method has returned 0-padded values for the "),a("RouterLink",{attrs:{to:"/guide/ethereum-provider.html#chain-ids"}},[e._v("default Ethereum chains")]),e._v(" "),a("em",[e._v("except")]),e._v(" Kovan.\nFor example, instead of "),a("code",[e._v("0x1")]),e._v(" and "),a("code",[e._v("0x2")]),e._v(", we currently return "),a("code",[e._v("0x01")]),e._v(" and "),a("code",[e._v("0x02")]),e._v(".")],1),e._v(" "),a("p",[e._v("For the time being, instead of calling the "),a("code",[e._v("eth_chainId")]),e._v(" RPC method, you should use the "),a("RouterLink",{attrs:{to:"/guide/ethereum-provider.html#ethereum-chainid"}},[a("code",[e._v("ethereum.chainId")]),e._v(" property")]),e._v(" and the "),a("RouterLink",{attrs:{to:"/guide/ethereum-provider.html#chainchanged"}},[a("code",[e._v("chainChanged")]),e._v(" event")]),e._v(".")],1),e._v(" "),a("h3",{attrs:{id:"handling-the-removal-of-chainidchanged"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#handling-the-removal-of-chainidchanged"}},[e._v("#")]),e._v(" Handling the Removal of "),a("code",[e._v("chainIdChanged")])]),e._v(" "),a("p",[a("code",[e._v("chainIdChanged")]),e._v(" is a typo of "),a("code",[e._v("chainChanged")]),e._v(".\nTo migrate, simply listen for "),a("code",[e._v("chainChanged")]),e._v(" instead:")]),e._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Instead of this:")]),e._v("\nethereum"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'chainIdChanged'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[e._v("chainId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=>")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("/* handle the chainId */")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Do this:")]),e._v("\nethereum"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'chainChanged'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[e._v("chainId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=>")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("/* handle the chainId */")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),a("h3",{attrs:{id:"handling-the-removal-of-isenabled-and-isapproved"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#handling-the-removal-of-isenabled-and-isapproved"}},[e._v("#")]),e._v(" Handling the Removal of "),a("code",[e._v("isEnabled()")]),e._v(" and "),a("code",[e._v("isApproved()")])]),e._v(" "),a("p",[e._v("Before the new provider API shipped, we added\n"),a("RouterLink",{attrs:{to:"/guide/ethereum-provider.html#ethereum-metamask-isenabled-to-be-removed"}},[a("code",[e._v("_metamask.isEnabled")])]),e._v(" and\n"),a("RouterLink",{attrs:{to:"/guide/ethereum-provider.html#ethereum-metamask-isapproved-to-be-removed"}},[a("code",[e._v("_metamask.isApproved")])]),e._v("\nto enable web3 sites to check if they have "),a("RouterLink",{attrs:{to:"/guide/rpc-api.html#eth-requestaccounts"}},[e._v("access to the user's accounts")]),e._v(".\n"),a("code",[e._v("isEnabled")]),e._v(" and "),a("code",[e._v("isApproved")]),e._v(" are identical, except that "),a("code",[e._v("isApproved")]),e._v(" is "),a("code",[e._v("async")]),e._v(".\nThese methods were arguably never that useful, but they are completely redundant since the introduction of MetaMask's "),a("RouterLink",{attrs:{to:"/guide/rpc-api.html#permissions"}},[e._v("permission system")]),e._v(".")],1),e._v(" "),a("p",[e._v("We recommend that you check for account access in the following ways:")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("You can call the "),a("RouterLink",{attrs:{to:"/guide/rpc-api.html#wallet-getpermissions"}},[a("code",[e._v("wallet_getPermissions")]),e._v(" RPC method")]),e._v(" and check for the "),a("code",[e._v("eth_accounts")]),e._v(" permission.")],1)]),e._v(" "),a("li",[a("p",[e._v("You can call the "),a("code",[e._v("eth_accounts")]),e._v(" RPC method and the "),a("RouterLink",{attrs:{to:"/guide/ethereum-provider.html#ethereum-metamask-isunlocked"}},[a("code",[e._v("ethereum._metamask.isUnlocked()")]),e._v(" function")]),e._v(".")],1),e._v(" "),a("ul",[a("li",[a("p",[e._v("MetaMask has to be unlocked before you can access the user's accounts.\nIf the array returned by "),a("code",[e._v("eth_accounts")]),e._v(" is empty, check if MetaMask is locked using "),a("code",[e._v("isUnlocked()")]),e._v(".")])]),e._v(" "),a("li",[a("p",[e._v("If MetaMask is unlocked and you still aren't receiving any accounts, it's time to request accounts using the "),a("RouterLink",{attrs:{to:"/guide/rpc-api.html#eth-requestaccounts"}},[a("code",[e._v("eth_requestAccounts")]),e._v(" RPC method")]),e._v(".")],1)])])])]),e._v(" "),a("h3",{attrs:{id:"handling-the-removal-of-ethereum-publicconfigstore"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#handling-the-removal-of-ethereum-publicconfigstore"}},[e._v("#")]),e._v(" Handling the Removal of "),a("code",[e._v("ethereum.publicConfigStore")])]),e._v(" "),a("p",[e._v("How to handle this change depends on if and how you use the "),a("code",[e._v("publicConfigStore")]),e._v(".\nWe have seen examples of listening for provider state changes the "),a("code",[e._v("publicConfigStore")]),e._v(" "),a("code",[e._v("data")]),e._v(" event, and accessing the "),a("code",[e._v("publicConfigStore")]),e._v(" internal state directly.")]),e._v(" "),a("p",[e._v("We recommend that you search your code and its dependencies for references to "),a("code",[e._v("publicConfigStore")]),e._v(".\nIf you find any references, you should understand what it's being used for, and migrate to "),a("RouterLink",{attrs:{to:"/guide/ethereum-provider.html#using-the-provider"}},[e._v("one of the recommended provider APIs")]),e._v(" instead.\nIf you don't find any references, you should not be affected by this change.")],1),e._v(" "),a("p",[e._v("Although it is possible that your dependencies use the "),a("code",[e._v("publicConfigStore")]),e._v(", we have confirmed that the latest versions of the following common libraries will not be affected by this change:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("ethers")])]),e._v(" "),a("li",[a("code",[e._v("web3")]),e._v(" (web3.js)")])]),e._v(" "),a("h2",{attrs:{id:"replacing-window-web3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#replacing-window-web3"}},[e._v("#")]),e._v(" Replacing "),a("code",[e._v("window.web3")])]),e._v(" "),a("p",[e._v("For historical reasons, MetaMask injects "),a("a",{attrs:{href:"https://github.com/ethereum/web3.js/tree/0.20.7",target:"_blank",rel:"noopener noreferrer"}},[a("code",[e._v("web3@0.20.7")]),a("OutboundLink")],1),e._v(" into all web pages.\nThis version of "),a("code",[e._v("web3")]),e._v(" is deprecated, and is no longer maintained by the "),a("a",{attrs:{href:"https://github.com/ethereum/web3.js/",target:"_blank",rel:"noopener noreferrer"}},[e._v("web3.js"),a("OutboundLink")],1),e._v(" team.")]),e._v(" "),a("p",[e._v("If your website relies on our "),a("code",[e._v("window.web3")]),e._v(" object, your Ethereum-related functionality will break when we stop injecting "),a("code",[e._v("window.web3")]),e._v(".\nContinue reading to learn more about the migration options.")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("Regardless of how you choose to migrate, you will probably want to read the "),a("code",[e._v("web3@0.20.7")]),e._v(" documentation, which you can find "),a("a",{attrs:{href:"https://github.com/ethereum/web3.js/blob/0.20.7/DOCUMENTATION.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),a("OutboundLink")],1),e._v(".")])]),e._v(" "),a("h3",{attrs:{id:"using-window-ethereum-directly"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-window-ethereum-directly"}},[e._v("#")]),e._v(" Using "),a("code",[e._v("window.ethereum")]),e._v(" Directly")]),e._v(" "),a("p",[e._v("For many web3 sites, the API provided by "),a("code",[e._v("window.ethereum")]),e._v(" is more than sufficient.\nMuch of the "),a("code",[e._v("web3")]),e._v(" API simply maps to RPC methods, all of which can be requested using "),a("RouterLink",{attrs:{to:"/guide/ethereum-provider.html#ethereum-request-args"}},[a("code",[e._v("ethereum.request()")])]),e._v(".\nFor example, here are a couple of actions performed using first "),a("code",[e._v("window.web3")]),e._v(", and then their equivalents using "),a("code",[e._v("window.ethereum")]),e._v(".")],1),e._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("/**\n * Getting Accounts\n */")]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// window.web3")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" accounts "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("accounts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// window.ethereum")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" accounts "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("await")]),e._v(" ethereum"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("request")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" method"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'eth_accounts'")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("/**\n * Sending a Transaction\n */")]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// window.web3")]),e._v("\nweb3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sendTransaction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    to"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'0x...'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'from'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'0x...'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    value"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'0x...'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// And so on...")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[e._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" result")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=>")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("if")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("return")]),e._v(" console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Handle the result")]),e._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// window.ethereum")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("try")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" transactionHash "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("await")]),e._v(" ethereum"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("request")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    method"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'eth_sendTransaction'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    params"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        to"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'0x...'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'from'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'0x...'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n        value"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'0x...'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// And so on...")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Handle the result")]),e._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("transactionHash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("catch")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("h3",{attrs:{id:"using-an-updated-convenience-library"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-an-updated-convenience-library"}},[e._v("#")]),e._v(" Using an Updated Convenience library")]),e._v(" "),a("p",[e._v("If you decide that you need a convenience library, you will have to convert your usage of "),a("code",[e._v("window.web3")]),e._v(" to an updated convenience library.\nWe recommend one of the following options.")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://npmjs.com/package/ethers",target:"_blank",rel:"noopener noreferrer"}},[a("code",[e._v("ethers")]),a("OutboundLink")],1),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://docs.ethers.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Documentation"),a("OutboundLink")],1)])])]),e._v(" "),a("li",[a("a",{attrs:{href:"https://npmjs.com/package/web3",target:"_blank",rel:"noopener noreferrer"}},[a("code",[e._v("web3")]),a("OutboundLink")],1),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://web3js.readthedocs.io",target:"_blank",rel:"noopener noreferrer"}},[e._v("Documentation"),a("OutboundLink")],1)])])])]),e._v(" "),a("h3",{attrs:{id:"using-metamask-legacy-web3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-metamask-legacy-web3"}},[e._v("#")]),e._v(" Using "),a("code",[e._v("@metamask/legacy-web3")])]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),a("p",[e._v("We strongly recommend that you consider one of the other two migration paths before resorting to this one.\nIt is not future-proof, and it is not guaranteed to work.")])]),e._v(" "),a("p",[e._v("Finally, if you just want your web3 site to continue to work, we created "),a("a",{attrs:{href:"https://npmjs.com/package/@metamask/legacy-web3",target:"_blank",rel:"noopener noreferrer"}},[a("code",[e._v("@metamask/legacy-web3")]),a("OutboundLink")],1),e._v(".\nThis package is a drop-in replacement for our "),a("code",[e._v("window.web3")]),e._v(" that you can add to your web3 site even before MetaMask stops injecting "),a("code",[e._v("window.web3")]),e._v(".")]),e._v(" "),a("p",[a("code",[e._v("@metamask/legacy-web3")]),e._v(" should work exactly like our injected "),a("code",[e._v("window.web3")]),e._v(", but "),a("em",[e._v("we cannot guarantee that it works perfectly")]),e._v(".\nWe will not fix any future incompatibilities between "),a("code",[e._v("web3@0.20.7")]),e._v(" and MetaMask itself, nor will we fix any bugs in "),a("code",[e._v("web3@0.20.7")]),e._v(" itself.")]),e._v(" "),a("p",[e._v("For installation and usage instructions, please see "),a("a",{attrs:{href:"https://npmjs.com/package/@metamask/legacy-web3",target:"_blank",rel:"noopener noreferrer"}},[e._v("npm"),a("OutboundLink")],1),e._v(".")])])}),[],!1,null,null,null);t.default=s.exports}}]);