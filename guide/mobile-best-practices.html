<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Mobile Best Practices | MetaMask Docs</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" href="/metamask-fox.svg">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="Welcome">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    <link rel="preload" href="/assets/css/0.styles.136e0e71.css" as="style"><link rel="preload" href="/assets/js/app.e86f28ec.js" as="script"><link rel="preload" href="/assets/js/3.706dd5d3.js" as="script"><link rel="preload" href="/assets/js/20.55813330.js" as="script"><link rel="preload" href="/assets/js/6.df9aa455.js" as="script"><link rel="prefetch" href="/assets/js/10.62f8824a.js"><link rel="prefetch" href="/assets/js/11.1d334f84.js"><link rel="prefetch" href="/assets/js/12.1c6d0703.js"><link rel="prefetch" href="/assets/js/13.1c230673.js"><link rel="prefetch" href="/assets/js/14.b8a0ac1d.js"><link rel="prefetch" href="/assets/js/15.e4df139a.js"><link rel="prefetch" href="/assets/js/16.9012ef23.js"><link rel="prefetch" href="/assets/js/17.3844de08.js"><link rel="prefetch" href="/assets/js/18.88519165.js"><link rel="prefetch" href="/assets/js/19.0b26a6c9.js"><link rel="prefetch" href="/assets/js/21.942babb5.js"><link rel="prefetch" href="/assets/js/22.ad70f6d3.js"><link rel="prefetch" href="/assets/js/23.29ed66e9.js"><link rel="prefetch" href="/assets/js/24.64a81807.js"><link rel="prefetch" href="/assets/js/25.42a69814.js"><link rel="prefetch" href="/assets/js/26.dd4cb312.js"><link rel="prefetch" href="/assets/js/27.0ac95ffb.js"><link rel="prefetch" href="/assets/js/28.2f8fab71.js"><link rel="prefetch" href="/assets/js/29.85eb6db7.js"><link rel="prefetch" href="/assets/js/30.e58c5899.js"><link rel="prefetch" href="/assets/js/4.7d38fd43.js"><link rel="prefetch" href="/assets/js/5.a9f95618.js"><link rel="prefetch" href="/assets/js/7.53c339ea.js"><link rel="prefetch" href="/assets/js/8.dfd83fe9.js"><link rel="prefetch" href="/assets/js/9.f64036f1.js"><link rel="prefetch" href="/assets/js/vendors~notification.c44ed76f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.136e0e71.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/metamask-fox.svg" alt="MetaMask Docs" class="logo"> <span class="site-name can-hide">MetaMask Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div> <a href="https://github.com/MetaMask/metamask-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div> <a href="https://github.com/MetaMask/metamask-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/" class="sidebar-link">Introduction</a></li><li><a href="/guide/getting-started.html" class="sidebar-link">Getting Started</a></li><li><a href="/guide/common-terms.html" class="sidebar-link">Common Terms</a></li><li><a href="/guide/initializing-dapps.html" class="sidebar-link">Initializing Dapps</a></li><li><a href="/guide/accessing-accounts.html" class="sidebar-link">Accessing Accounts</a></li><li><a href="/guide/sending-transactions.html" class="sidebar-link">Sending Transactions</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>API Reference</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/ethereum-provider.html" class="sidebar-link">Ethereum Provider API</a></li><li><a href="/guide/provider-migration.html" class="sidebar-link">Provider Migration Guide</a></li><li><a href="/guide/rpc-api.html" class="sidebar-link">RPC API</a></li><li><a href="/guide/signing-data.html" class="sidebar-link">Signing Data</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Best Practices</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/registering-function-names.html" class="sidebar-link">Registering Your Contract's Method Names</a></li><li><a href="/guide/registering-your-token.html" class="sidebar-link">Registering Tokens with Users</a></li><li><a href="/guide/defining-your-icon.html" class="sidebar-link">Defining Your App's Icon</a></li><li><a href="/guide/onboarding-library.html" class="sidebar-link">Onboarding Library</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Mobile</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/mobile-getting-started.html" class="sidebar-link">Mobile Getting Started</a></li><li><a href="/guide/mobile-best-practices.html" class="active sidebar-link">Mobile Best Practices</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/mobile-best-practices.html#the-provider-window-ethereum" class="sidebar-link">The Provider (window.ethereum)</a></li></ul></li><li><a href="/guide/dapp-compatibility.html" class="sidebar-link">Dapp Compatibility</a></li><li><a href="/guide/deeplinking.html" class="sidebar-link">Deeplinking</a></li><li><a href="/guide/walletconnect.html" class="sidebar-link">WalletConnect</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Resources</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/create-dapp.html" class="sidebar-link">Create A Simple Dapp</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="mobile-best-practices"><a href="#mobile-best-practices" class="header-anchor">#</a> Mobile Best Practices</h1> <p>If this page doesn't answer your question, please feel free to open an issue <a href="https://github.com/MetaMask/metamask-mobile" target="_blank" rel="noopener noreferrer">in our repository<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h2 id="the-provider-window-ethereum"><a href="#the-provider-window-ethereum" class="header-anchor">#</a> The Provider (window.ethereum)</h2> <p>The <a href="/guide/ethereum-provider.html">provider API</a> is the same for both MetaMask mobile and the desktop extension.
However, the providers become available (i.e., are injected into the page) at different points in the page lifecycle.</p> <h3 id="provider-availability"><a href="#provider-availability" class="header-anchor">#</a> Provider Availability</h3> <p>If you use <a href="https://npmjs.com/package/@metamask/detect-provider" target="_blank" rel="noopener noreferrer"><code>@metamask/detect-provider</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, there's nothing to worry about; it will reliably detect both the mobile and extension provider.</p> <p>If you don't use the <code>detect-provider</code> package, you have to detect the mobile provider manually.</p> <p>The extension provider will always be available by the time your code is executed.
Because of platform limitations, the mobile provider may not be injected until later in the page lifecycle.
For this purpose, the MetaMask provider dispatches the event <code>ethereum#initialized</code> on <code>window</code> when it is fully initialized.</p> <p>You can reliably detect both the mobile and extension provider with the following snippet.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>ethereum<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">handleEthereum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'ethereum#initialized'</span><span class="token punctuation">,</span> handleEthereum<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    once<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// If the event is not dispatched by the end of the timeout,</span>
  <span class="token comment">// the user probably doesn't have MetaMask installed.</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span>handleEthereum<span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3 seconds</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">handleEthereum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> ethereum <span class="token punctuation">}</span> <span class="token operator">=</span> window<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>ethereum <span class="token operator">&amp;&amp;</span> ethereum<span class="token punctuation">.</span>isMetaMask<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Ethereum successfully detected!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Access the decentralized web!</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Please install MetaMask!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/MetaMask/metamask-docs/edit/master/packages/docs/dist/guide/mobile-best-practices.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6/25/2020, 2:04:19 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/mobile-getting-started.html" class="prev">
        Mobile Getting Started
      </a></span> <span class="next"><a href="/guide/dapp-compatibility.html">
        Dapp Compatibility
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.e86f28ec.js" defer></script><script src="/assets/js/3.706dd5d3.js" defer></script><script src="/assets/js/20.55813330.js" defer></script><script src="/assets/js/6.df9aa455.js" defer></script>
  </body>
</html>
